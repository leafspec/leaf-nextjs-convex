# LEAF Reference Implementation - Next.js + Convex

Reference implementation of the [LEAF Specification](https://github.com/leafspec/spec) using Next.js and Convex.

## Overview

This is the first reference implementation of LEAF (Listen, Embed, Augment, Flow) - an AI-native knowledge base application specification. Currently implements hello world scaffolding to validate the Next.js + Convex stack.

**Stack:**
- Next.js 16 (App Router)
- Convex (reactive backend with real-time sync)
- shadcn/ui + Tailwind CSS

## Live Demo

- **Production:** [leaf-nextjs-convex.vercel.app](https://leaf-nextjs-convex.vercel.app)
- **LEAF Spec:** [github.com/leafspec/spec](https://github.com/leafspec/spec)

## Features

âœ… **Currently Implemented (SPEC-001):**
- Real-time message sync across browser tabs
- Next.js + Convex integration
- Production deployment to Vercel + Convex Cloud

ðŸš§ **Future Implementation:**
- User authentication
- Document upload and processing
- Vector embeddings and semantic search
- AI chat with document context
- Full LEAF spec compliance

## Development

### Prerequisites

- Node.js 18+
- Convex account (free tier available)
- Vercel account (optional, for deployment)

### Setup

1. **Clone and install:**
   ```bash
   git clone https://github.com/leafspec/leaf-nextjs-convex.git
   cd leaf-nextjs-convex
   npm install
   ```

2. **Set up Convex:**
   ```bash
   npx convex dev
   ```
   Follow the prompts to create a Convex project.

3. **Start development:**
   ```bash
   # Terminal 1 - Convex backend
   npx convex dev

   # Terminal 2 - Next.js frontend
   npm run dev
   ```

4. **Open:** http://localhost:3000

### Environment Variables

```bash
# .env.local (auto-generated by convex dev)
CONVEX_DEPLOYMENT=dev:your-deployment
NEXT_PUBLIC_CONVEX_URL=https://your-deployment.convex.cloud
```

## Architecture

```
â”œâ”€â”€ convex/
â”‚   â”œâ”€â”€ schema.ts          # Database schema
â”‚   â”œâ”€â”€ messages.ts        # Query and mutation functions
â”‚   â””â”€â”€ _generated/        # Auto-generated types
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ ConvexClientProvider.tsx  # Convex React provider
â”‚   â”‚   â”œâ”€â”€ layout.tsx               # Root layout with providers
â”‚   â”‚   â””â”€â”€ page.tsx                 # Homepage with messages UI
â”‚   â””â”€â”€ components/ui/     # shadcn/ui components
â””â”€â”€ ideas/                 # Project planning (separate repo)
```

## Deployment

### Convex Cloud

```bash
npx convex deploy
```

### Vercel

1. Connect GitHub repo to Vercel
2. Add environment variable: `NEXT_PUBLIC_CONVEX_URL` (production URL from convex deploy)
3. Deploy

## Contributing

This reference implementation follows the patterns defined in the [LEAF Specification](https://github.com/leafspec/spec). See the planning docs in the [my-life repo](https://github.com/TaylorHuston/my-life/tree/main/ideas/leaf-nextjs-convex) for development roadmap.

## Links

- **LEAF Specification:** https://github.com/leafspec/spec
- **Convex Documentation:** https://docs.convex.dev
- **Next.js Documentation:** https://nextjs.org/docs
